/*!
 * clipboard.js v1.6.1
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT Â© Zeno Rocha
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=e()}}((function(){return function e(t,i,a){function s(o,r){if(!i[o]){if(!t[o]){var c="function"==typeof require&&require;if(!r&&c)return c(o,!0);if(n)return n(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};t[o][0].call(u.exports,(function(e){var i=t[o][1][e];return s(i||e)}),u,u.exports,e,t,i,a)}return i[o].exports}for(var n="function"==typeof require&&require,o=0;o<a.length;o++)s(a[o]);return s}({1:[function(e,t,i){var a=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var s=Element.prototype;s.matches=s.matchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.webkitMatchesSelector}t.exports=function(e,t){for(;e&&e.nodeType!==a;){if(e.matches(t))return e;e=e.parentNode}}},{}],2:[function(e,t,i){function a(e,t,i,a){return function(i){i.delegateTarget=s(i.target,t),i.delegateTarget&&a.call(e,i)}}var s=e("./closest");t.exports=function(e,t,i,s,n){var o=a.apply(this,arguments);return e.addEventListener(i,o,n),{destroy:function(){e.removeEventListener(i,o,n)}}}},{"./closest":1}],3:[function(e,t,i){i.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},i.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||i.node(e[0]))},i.string=function(e){return"string"==typeof e||e instanceof String},i.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],4:[function(e,t,i){var a=e("./is"),s=e("delegate");t.exports=function(e,t,i){if(!e&&!t&&!i)throw new Error("Missing required arguments");if(!a.string(t))throw new TypeError("Second argument must be a String");if(!a.fn(i))throw new TypeError("Third argument must be a Function");if(a.node(e))return function(e,t,i){return e.addEventListener(t,i),{destroy:function(){e.removeEventListener(t,i)}}}(e,t,i);if(a.nodeList(e))return function(e,t,i){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,i)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,i)}))}}}(e,t,i);if(a.string(e))return function(e,t,i){return s(document.body,e,t,i)}(e,t,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},{"./is":3,delegate:2}],5:[function(e,t,i){t.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var i=e.hasAttribute("readonly");i||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),i||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var a=window.getSelection(),s=document.createRange();s.selectNodeContents(e),a.removeAllRanges(),a.addRange(s),t=a.toString()}return t}},{}],6:[function(e,t,i){function a(){}a.prototype={on:function(e,t,i){var a=this.e||(this.e={});return(a[e]||(a[e]=[])).push({fn:t,ctx:i}),this},once:function(e,t,i){function a(){s.off(e,a),t.apply(i,arguments)}var s=this;return a._=t,this.on(e,a,i)},emit:function(e){for(var t=[].slice.call(arguments,1),i=((this.e||(this.e={}))[e]||[]).slice(),a=0,s=i.length;a<s;a++)i[a].fn.apply(i[a].ctx,t);return this},off:function(e,t){var i=this.e||(this.e={}),a=i[e],s=[];if(a&&t)for(var n=0,o=a.length;n<o;n++)a[n].fn!==t&&a[n].fn._!==t&&s.push(a[n]);return s.length?i[e]=s:delete i[e],this}},t.exports=a},{}],7:[function(e,t,i){!function(a,s){if(void 0!==i)s(t,e("select"));else{var n={exports:{}};s(n,a.select),a.clipboardAction=n.exports}}(this,(function(e,t){"use strict";var i=function(e){return e&&e.__esModule?e:{default:e}}(t),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),n=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.resolveOptions(t),this.initSelection()}return s(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var a=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=a+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":a(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=n}))},{select:5}],8:[function(e,t,i){!function(a,s){if(void 0!==i)s(t,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var n={exports:{}};s(n,a.clipboardAction,a.tinyEmitter,a.goodListener),a.clipboard=n.exports}}(this,(function(e,t,i,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var i="data-clipboard-"+e;if(t.hasAttribute(i))return t.getAttribute(i)}var o=s(t),r=s(i),c=s(a),l=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),u=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.resolveOptions(i),a.listenClick(e),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,c.default)(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new o.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return n("action",e)}},{key:"defaultTarget",value:function(e){var t=n("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return n("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,i=!!document.queryCommandSupported;return t.forEach((function(e){i=i&&!!document.queryCommandSupported(e)})),i}}]),t}(r.default);e.exports=u}))},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)})),
/*!
 * jQuery Plugin: Are-You-Sure (Dirty Form Detection)
 * https://github.com/codedance/jquery.AreYouSure/
 *
 * Copyright (c) 2012-2014, Chris Dance and PaperCut Software http://www.papercut.com/
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Author:  chris.dance@papercut.com
 * Version: 1.9.0
 * Date:    13th August 2014
 */
function(e){e.fn.areYouSure=function(t){var i=e.extend({message:"You have unsaved changes!",dirtyClass:"dirty",change:null,silent:!1,addRemoveFieldsMarksDirty:!1,fieldEvents:"change keyup propertychange input",fieldSelector:":input:not(input[type=submit]):not(input[type=button])"},t),a=function(t){if(t.hasClass("ays-ignore")||t.hasClass("aysIgnore")||t.attr("data-ays-ignore")||void 0===t.attr("name"))return null;if(t.is(":disabled"))return"ays-disabled";var i,a=t.attr("type");switch(t.is("select")&&(a="select"),a){case"checkbox":case"radio":i=t.is(":checked");break;case"select":i="",t.find("option").each((function(t){var a=e(this);a.is(":selected")&&(i+=a.val())}));break;default:i=t.val()}return i},s=function(e){e.data("ays-orig",a(e))},n=function(t){var s=function(e){var t=e.data("ays-orig");return void 0!==t&&a(e)!=t},n=e(this).is("form")?e(this):e(this).parents("form");if(s(e(t.target)))r(n,!0);else{if($fields=n.find(i.fieldSelector),i.addRemoveFieldsMarksDirty)if(n.data("ays-orig-field-count")!=$fields.length)return void r(n,!0);var o=!1;$fields.each((function(){if($field=e(this),s($field))return o=!0,!1})),r(n,o)}},o=function(t){var a=t.find(i.fieldSelector);e(a).each((function(){s(e(this))})),e(a).unbind(i.fieldEvents,n),e(a).bind(i.fieldEvents,n),t.data("ays-orig-field-count",e(a).length),r(t,!1)},r=function(e,t){var a=t!=e.hasClass(i.dirtyClass);e.toggleClass(i.dirtyClass,t),a&&(i.change&&i.change.call(e,e),t&&e.trigger("dirty.areYouSure",[e]),t||e.trigger("clean.areYouSure",[e]),e.trigger("change.areYouSure",[e]))},c=function(){var t=e(this),a=t.find(i.fieldSelector);e(a).each((function(){var t=e(this);t.data("ays-orig")||(s(t),t.bind(i.fieldEvents,n))})),t.trigger("checkform.areYouSure")},l=function(){o(e(this))};return i.silent||window.aysUnloadSet||(window.aysUnloadSet=!0,e(window).bind("beforeunload",(function(){if($dirtyForms=e("form").filter("."+i.dirtyClass),0!=$dirtyForms.length){if(navigator.userAgent.toLowerCase().match(/msie|chrome/)){if(window.aysHasPrompted)return;window.aysHasPrompted=!0,window.setTimeout((function(){window.aysHasPrompted=!1}),900)}return i.message}}))),this.each((function(t){if(e(this).is("form")){var a=e(this);a.submit((function(){a.removeClass(i.dirtyClass)})),a.bind("reset",(function(){r(a,!1)})),a.bind("rescan.areYouSure",c),a.bind("reinitialize.areYouSure",l),a.bind("checkform.areYouSure",n),o(a)}}))}}(jQuery),function(e){"use strict";e(".js-picu-share-select li a").click((function(t){t.preventDefault(),e(".js-picu-share-select li a").removeClass("active"),e(this).addClass("active");var i=e(this).prop("hash");e(".picu-share-option").removeClass("is-active"),e(i).addClass("is-active"),e(".js-picu_collection_share_method").val(i.substr(1)),e("#picu-password .picu-hint").toggleClass("is-hidden"),"#picu-copy-link"==i?e("[name=picu_sendmail]").val(picu_admin.button_text_publish):e("[name=picu_sendmail]").val(picu_admin.button_text_send_to_client)})),e(".js-toggle-picu-gallery-height").click((function(t){t.preventDefault(),e(".picu-gallery-has-images").toggleClass("js-collapsed"),e(this).parent().toggleClass("active")})),e("#picu-collection-link").click((function(){e(this).select()})),e(".picu-option-item > a").click((function(t){t.preventDefault(),e(this).next(".picu-option-content").toggleClass("is-hidden")})),e("#post_password").length>=1&&e("#post_password").val().length>0&&e(".picu-remove-password").removeClass("is-hidden"),e("#post_password").keyup((function(){e("#post_password").val().length>0?(e(".picu-remove-password").removeClass("is-hidden"),e(".picu-option-item a .dashicons").removeClass("dashicons-unlock").addClass("dashicons-lock")):(e(".picu-remove-password").addClass("is-hidden"),e(".picu-option-item a .dashicons").removeClass("dashicons-lock").addClass("dashicons-unlock"))})),e(".js-picu-remove-password").click((function(t){t.preventDefault(),e("#picu-password #post_password").val(""),e(".picu-option-item a .dashicons").removeClass("dashicons-lock").addClass("dashicons-unlock"),e(this).addClass("is-hidden")})),e(".picu-copy-collection-url-to-clipboard").click((function(e){e.preventDefault()})),new Clipboard(".picu-copy-collection-url-to-clipboard").on("success",(function(t){e(".picu-tooltip-copied-url").show()})),e(".picu-copy-collection-url-to-clipboard").on("mouseleave",(function(){e(".picu-tooltip-copied-url").fadeOut()})),e(".js-picu-edit").click((function(t){t.preventDefault(),e("#js-picu-edit").removeClass("is-hidden")})),e(".js-picu-add-client").click((function(t){t.preventDefault(),e("#js-new-recipient").removeClass("is-hidden"),e(".recipient--placeholder").addClass("is-hidden"),e('[name="picu-new-recipient"]').focus()})),e(".js-picu-remove-client").click((function(t){t.preventDefault(),e("#js-picu-remove-client").find(".js-picu-remove-final")[0].href=t.target.href,e("#js-picu-remove-client").removeClass("is-hidden")})),e(".js-picu-close").click((function(t){t.preventDefault(),e("#js-picu-close").removeClass("is-hidden")})),e(".js-picu-duplicate").click((function(t){t.preventDefault();var i=e(this).attr("data-id");e("#js-picu-duplicate-"+i).removeClass("is-hidden")})),e("input[type=radio][name^=picu_duplicate_]").change((function(){var t=e(this).attr("data-id");if(console.log(this.value),"selected"==this.value)var i=e("[name=picu_duplication_url_"+t+"]").val()+"&picu_duplicate_collection_selected=1";else if("not-selected"==this.value)i=e("[name=picu_duplication_url_"+t+"]").val()+"&picu_duplicate_collection_not_selected=1";else i=e("[name=picu_duplication_url_"+t+"]").val();e(".js-picu-duplication-button-"+t).attr("href",i)})),e(".js-picu-cancel-modal").click((function(t){t.preventDefault(),e(this).parents(".picu-modal").addClass("is-hidden")})),e(".js-picu-cancel-new-recipient").click((function(t){t.preventDefault(),e(".recipient--placeholder").removeClass("is-hidden"),e(this).parents(".recipient--new").addClass("is-hidden")})),e(".js-picu-select-custom-message").change((function(t){e(".js-picu-collection-description").val(e(this).val())})),e(".js-picu-collection-description").bind("input propertychange",(function(){this.value.length&&e(".js-picu-select-custom-message option:first-child").attr("selected","selected")})),e("#picu-apply-watermark").click((function(t){e(".picu-watermark-saving-indicator").removeClass("is-saved").addClass("is-saving"),function(){var t=e("#post_ID").val();if(e("#picu-apply-watermark")[0].checked)var i="on";else i="off";e.post(picu_admin.ajaxurl,{action:"picu_save_watermark_state",security:picu_admin.ajax_nonce,post_id:t,picu_apply_watermark:i},(function(t){e(".picu-watermark-saving-indicator").removeClass("is-saving").addClass("is-saved")})).fail((function(){console.log("Saving failed")}))}()}))}(jQuery);var picu_delivery_uploader=wp.media({state:"gallery-edit",frame:"post"});picu_delivery_uploader.states.models[4].attributes.title=picu_admin.media_modal_title,_wpMediaViewsL10n.insertGallery=picu_admin.media_modal_button_insert_text,picu_delivery_uploader&&(wp.media.model.settings.post.id=picu_admin.postID,picu_delivery_uploader.on("open",(function(){if(jQuery("#delivery_image_ids").val()){var e=jQuery("#delivery_image_ids").val().split(","),t=picu_delivery_uploader.state().get("library");e.forEach((function(e){attachment=wp.media.attachment(e),attachment.fetch(),t.add(attachment?[attachment]:[])}))}jQuery(".media-modal").addClass("picu-upload-modal")})),picu_delivery_uploader.on("update",(function(e){var t=[];jQuery(".picu-gallery-thumbnails").empty(),e.each((function(e){t.push(e.toJSON().id);var i="";i=e.toJSON().sizes["picu-small"]?e.toJSON().sizes["picu-small"].url:e.toJSON().sizes.full.url,jQuery(".picu-gallery-thumbnails").append('<figure><div class="picu-gallery-thumbnail-box"><div class="picu-gallery-thumbnail-box-inner"><img src="'+i+'" class="attachment-picu-thumbnail" alt="" title=""></div></div></figure>')})),jQuery(".picu-postbox").addClass("picu-gallery-has-images"),t.length>10&&jQuery(".picu-postbox").addClass("js-collapsed is-collapsible");var i=t.join(",");jQuery("#delivery_image_ids").val(i),jQuery("#post").addClass("dirty")}))),jQuery(document).ready((function(){jQuery(".picu-upload-delivery-button").on("click",(function(e){e.preventDefault(),picu_delivery_uploader.open()})),jQuery(".picu-postbox-inner").on("drop",(function(){picu_delivery_uploader.open()}))})),function(e){"use strict";function t(){var t=[],i=e(".js-picu-image-title-composition span");_.each(i,(function(i){t.push("["+e(i).attr("id")+"]")})),e(".js-picu-file-name-comp").val(t.join(" "))}e(".add_logo").on("click",(function(t){t.preventDefault(),function(){var t,i;if(void 0!==t)return void t.open();(t=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",multiple:!1})).on("insert",(function(a){i=t.state().get("selection").first().toJSON(),0>jQuery.trim(i.url.length)||(e(".preview-logo").remove(),e(".logo-setting-wrap").prepend('<img src="'+i.url+'" class="preview-logo" alt="logo" />'),e("#logo").val(i.url),e(".ui-upload").removeClass("active"),e(".ui-replace-remove").addClass("active"))})),t.open()}()})),e("#remove_logo").click((function(t){t.preventDefault(),e(".preview-logo").remove(),e("#logo").val(""),e(".ui-upload").addClass("active"),e(".ui-replace-remove").removeClass("active")})),e("#show_blog_title").on("change",(function(){e(this).prop("checked")?e(".blog-name").addClass("active"):e(".blog-name").removeClass("active")})),e(".js-radio-tab li a").click((function(t){t.preventDefault(),e(".js-radio-tab li a").removeClass("active"),e(this).addClass("active");var i=e(this).prop("hash");e(".radio-tab-box").removeClass("is-active"),e(i).addClass("is-active"),e(".js-picu_bc_font_method").val(i.substr(1))})),e("#font").on("change",(function(){e("#font option:selected").each((function(){var t=e(this).val();e(".collection-preview").find("style").remove(),e(".collection-preview").before("<style>.collection-preview { font-family: "+t+" }</style>")}))})),e(".color-field").wpColorPicker(),e(".js-picu-image-title-composition").sortable({revert:!0,containment:"parent",stop:function(){t()}}),e(".js-picu-image-title-sources span").draggable({connectToSortable:".js-picu-image-title-composition",appendTo:"parent",helper:"clone",revert:"invalid",stop:function(t,i){var a=e(this).attr("id");e(".js-picu-image-title-composition .new").append('<a class="picu-title-comp-remove js-picu-title-comp-remove" href="#">Remove title part</a>').removeClass("new").css("width","auto").attr("id",a)}}),e(".js-picu-image-title-sources, .js-picu-image-title-sources span").disableSelection(),e(".js-picu-image-title-composition").on("click",".js-picu-title-comp-remove",(function(i){i.preventDefault(),e(this).parents("span").remove(),t()}));var i,a,s,n="",o="";function r(){var t=[],i=e(".picu-custom-email-messages-table tbody tr");_.each(i,(function(i){if(e(i).hasClass("default-message"))var a=1;else a=0;var s=e(i).children("td:nth-child(2)").children(".picu-message-edit-box").children(".picu-message-name").val(),n=e(i).children("td:nth-child(2)").children(".picu-message-edit-box").children(".picu-message-body").val();t.push({message_name:s,message_body:n,message_default:a})})),e(".picu-message-saving").removeClass("is-saved"),e(".picu-message-saving").addClass("is-saving"),e.post(picu_admin.ajaxurl,{action:"picu_save_custom_email_messages",security:picu_admin.ajax_nonce,picu_email_templates:t},(function(t){e(".picu-message-saving").removeClass("is-saving"),e(".picu-message-saving").addClass("is-saved")})).fail((function(){console.log("Saving failed")}))}if(e(document).on("click",".picu-custom-email-messages-table tr td:first-child svg",(function(t){t.preventDefault(),e(this).parents("tr").hasClass("default-message")?e(this).parents("tr").removeClass("default-message"):(e(".picu-custom-email-messages-table tr").removeClass("default-message"),e(this).parents("tr").addClass("default-message")),r()})),e(document).on("click",".js-edit-picu-message",(function(t){t.preventDefault(),n=e(this).parents("td").children(".picu-message-edit-box").children(".picu-message-name").val(),o=e(this).parents("td").children(".picu-message-edit-box").children(".picu-message-body").val(),e(".picu-custom-email-messages-table tr").removeClass("edit-active"),e(this).parents("tr").addClass("edit-active")})),e(document).on("click",".picu-message-name-title",(function(t){t.preventDefault(),n=e(this).parents("td").children(".picu-message-edit-box").children(".picu-message-name").val(),o=e(this).parents("td").children(".picu-message-edit-box").children(".picu-message-body").val(),e(".picu-custom-email-messages-table tr").removeClass("edit-active"),e(this).parents("tr").addClass("edit-active"),e(this).parents("td").children(".picu-message-edit-box").children(".picu-message-name").focus()})),e(document).on("click",".js-cancel-picu-message",(function(t){t.preventDefault(),e(this).parents(".picu-message-edit-box").parents("td").parents("tr").hasClass("new")&&e(this).parents("tr").remove(),e(this).parents("td").children(".picu-message-edit-box").children(".picu-message-name").val(n),e(this).parents("td").children(".picu-message-edit-box").children(".picu-message-body").val(o),""==e(this).parents("td").children(".picu-message-name").html()&&""==e(this).parents("td").children(".picu-message-edit-box").children(".picu-message-body").val()?e(this).parents("tr").remove():e(".picu-custom-email-messages-table tr").removeClass("edit-active")})),e(document).on("click",".js-save-picu-message",(function(t){t.preventDefault();var i=e(this).parents("td").children(".picu-message-edit-box").children(".picu-message-name").val();if(!i)return window.alert(picu_admin.empty_template_name_hint),void e(this).parents("td").children(".picu-message-edit-box").children(".picu-message-name").focus();e(this).parents("td").children(".picu-message-name-title").html(i),e(".picu-custom-email-messages-table tr").removeClass("edit-active"),e(this).parents("tr").removeClass("new"),r()})),e(document).on("click",".js-delete-picu-message",(function(t){t.preventDefault(),e(this).parents("tr").remove(),r()})),e(".js-add-picu-message").click((function(t){t.preventDefault(),n="",o="",e(".picu-custom-email-messages-table tbody").append('<tr class="picu-message edit-active new"><td><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="square" stroke-linejoin="arcs"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg></td><td colspan="2"><div id="picu-message-name" class="picu-message-name-title" contenteditable="true"></div><div class="picu-message-edit-box"><input type="text" class="picu-message-name" /><textarea id="picu-message-body" class="picu-message-body"></textarea> <button class="button button-primary js-save-picu-message">'+picu_admin.button_text_save_message+'</button> <button class="button button js-cancel-picu-message">'+picu_admin.button_text_cancel+'</button></div><div class="picu-message-actions"><a class="js-edit-picu-message" href="#">'+picu_admin.link_text_edit+'</a> | <a class="js-delete-picu-message" href="#">'+picu_admin.link_text_delete+"</a></div></td></tr>"),e(".edit-active td:nth-child(2) .picu-message-name").focus()})),e(document).on("keypress",".picu-message-name",(function(t){13==t.keyCode&&(t.preventDefault(),e(this).next().focus())})),e('input[name^="picu_addon_licenses"]').on("keypress","",(function(t){13==t.keyCode&&(t.preventDefault(),e(t.currentTarget).next().next().trigger("click"))})),e(".picu_settings__settings-item__watermark .add_watermark").on("click",(function(t){t.preventDefault(),function(){var t,s;if(void 0!==t)return void t.open();(t=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",multiple:!1})).on("insert",(function(n){if(s=t.state().get("selection").first().toJSON(),!(0>jQuery.trim(s.url.length))){e(".js-watermark-positioned").remove(),e(".js-watermark-shadow").remove(),e(".picu_settings__settings-item__watermark .watermark-position").append('<img src="'+s.url+'" class="picu-watermark-positioned js-watermark-positioned" alt="watermark" /><img src="'+s.url+'" class="watermark-shadow js-watermark-shadow" alt="" />');var o=e(".js-watermark-positioned")[0];e("<img/>").attr("src",e(o).attr("src")).load((function(){i=this.naturalWidth,a=this.naturalHeight,l(i,a)})),e("#watermark").val(s.id),e(".js-picu-watermark-size-scaling-wrap").addClass("has-watermark"),e(".picu_settings__settings-item__watermark .ui-upload").removeClass("active"),e(".picu_settings__settings-item__watermark .ui-replace-remove").addClass("active")}})),t.open()}()})),e(".js-watermark-positioned").length>0){var c=e(".js-watermark-positioned")[0];e("<img/>").attr("src",e(c).attr("src")).load((function(){i=this.naturalWidth,a=this.naturalHeight,l(i,a)}))}function l(t,i){var a,s=e("#watermark_size").val();if(e(".picu-watermark-position-wrap").hasClass("watermark-fill"))return e(".js-watermark-positioned").css("width",t),e(".js-watermark-positioned").css("height",i),e(".js-watermark-positioned").css("margin-left",t/2*-1),void e(".js-watermark-positioned").css("margin-top",i/2*-1);t/i>1?(a=t/i,e(".js-watermark-positioned").css("width",s/100*300),e(".js-watermark-positioned").css("height",300/a*(s/100))):t/i<1?(a=t/i,e(".js-watermark-positioned").css("width",300*a*(s/100)),e(".js-watermark-positioned").css("height",s/100*300)):(a=1,e(".js-watermark-positioned").css("width",s/100*300),e(".js-watermark-positioned").css("height",s/100*300));var n=e(".js-watermark-position:checked").val();if("top-center"==n||"middle-center"==n||"bottom-center"==n){var o=e(".js-watermark-positioned")[0].width;e(".js-watermark-positioned").css("margin-left",-1*o/2)}else e(".js-watermark-positioned").css("margin-left",0);if("middle-left"==n||"middle-center"==n||"middle-right"==n){var r=e(".js-watermark-positioned")[0].height;e(".js-watermark-positioned").css("margin-top",-1*r/2)}else e(".js-watermark-positioned").css("margin-top",0);e(".watermark-size-percent").html(s+"%")}e(".picu_settings__settings-item__watermark #remove_watermark").click((function(t){t.preventDefault(),e(".js-watermark-positioned").remove(),e("#watermark").val(""),e(".js-picu-watermark-size-scaling-wrap").removeClass("has-watermark"),e(".picu_settings__settings-item__watermark .ui-upload").addClass("active"),e(".picu_settings__settings-item__watermark .ui-replace-remove").removeClass("active")})),e("#watermark_size, .js-watermark-position").on("change",(function(){e(".js-watermark-positioned").length>0&&l(i,a)})),e(".watermark-position label").hover((function(t){var i=t.currentTarget.control.value,a=e(".js-watermark-positioned").width(),s=e(".js-watermark-positioned").height();e(".js-watermark-shadow").css("width",a+"px"),e(".js-watermark-shadow").css("height",s+"px"),"top-left"==i?e(".js-watermark-shadow").css({top:"0",left:"0"}):"top-center"==i?e(".js-watermark-shadow").css({top:"0",left:"50%","margin-left":a/-2+"px"}):"top-right"==i?e(".js-watermark-shadow").css({top:"0",right:"0"}):"middle-left"==i?e(".js-watermark-shadow").css({top:"50%",left:"0","margin-top":s/-2+"px"}):"middle-center"==i?e(".js-watermark-shadow").css({top:"50%",left:"50%","margin-left":a/-2+"px","margin-top":s/-2+"px"}):"middle-right"==i?e(".js-watermark-shadow").css({top:"50%",right:"0","margin-top":s/-2+"px"}):"bottom-left"==i?e(".js-watermark-shadow").css({bottom:"0",left:"0"}):"bottom-center"==i?e(".js-watermark-shadow").css({bottom:"0",left:"50%","margin-left":a/-2+"px"}):"bottom-right"==i&&e(".js-watermark-shadow").css({bottom:"0",right:"0"}),e(".js-watermark-shadow").show()}),(function(){e(".js-watermark-shadow").hide(),e(".js-watermark-shadow").removeAttr("style")})),e("#watermark_size_proportional, #watermark_size_fill").on("change",(function(t){"fill"==e(t.target).val()?(e(".picu-watermark-position-wrap").removeClass("watermark-proportional"),e(".picu-watermark-position-wrap").addClass("watermark-fill")):(e(".picu-watermark-position-wrap").addClass("watermark-proportional"),e(".picu-watermark-position-wrap").removeClass("watermark-fill")),e(".js-watermark-positioned").length>0&&l(i,a)})),new ClipboardJS(".picu-debug-copy-button").on("success",(function(t){var i=e(t.trigger),a=e(".success",i.closest("div"));t.clearSelection(),i.trigger("focus"),clearTimeout(s),a.removeClass("hidden"),s=setTimeout((function(){a.addClass("hidden")}),3e3)}))}(jQuery),function(e){"use strict";window.location.hash?(setTimeout((function(){window.scrollTo(0,0)}),1),e(".nav-tab").removeClass("nav-tab-active is-active"),e('.nav-tab-wrapper a[href$="'+window.location.hash+'"]').addClass("nav-tab-active is-active"),e(".js-picu-tab-content").removeClass("is-active"),e(window.location.hash).addClass("is-active")):(e(".nav-tab").not(".notice").first().addClass("nav-tab-active is-active"),e("js-picu-tab-content").first().addClass("is-active")),e(".nav-tab").click((function(t){t.preventDefault();var i=e(this),a=e(this).prop("hash");e(".nav-tab").removeClass("nav-tab-active is-active"),e(i).addClass("nav-tab-active is-active"),e(".js-picu-tab-content").removeClass("is-active"),e(a).addClass("is-active"),history.pushState({},"",a)})),e(".js-tab-switch").click((function(t){t.preventDefault();var i=e(this).prop("hash"),a=e('.nav-tab[href="'+i+'"]');e(".nav-tab").removeClass("nav-tab-active is-active"),e(a).addClass("nav-tab-active is-active"),e(".js-picu-tab-content").removeClass("is-active"),e(i).addClass("is-active"),history.pushState({},"",i)})),e(document).on("click",".picu-telemetry-nag-notice .notice-dismiss",(function(){e.post(picu_admin.ajaxurl,{action:"picu_save_telemetry_nag_state",security:picu_admin.ajax_nonce})})),e(document).on("click",".picu-settings-notice .notice-dismiss",(function(){this.parentNode.remove()}))}(jQuery);var picu_uploader=wp.media({state:"gallery-edit",frame:"post"});picu_uploader.states.models[4].attributes.title=picu_admin.media_modal_title,_wpMediaViewsL10n.insertGallery=picu_admin.media_modal_button_insert_text,picu_uploader&&(wp.media.model.settings.post.id=picu_admin.postID,picu_uploader.on("open",(function(){if(jQuery("#picu-gallery-ids").val()){var e=jQuery("#picu-gallery-ids").val().split(","),t=picu_uploader.state().get("library");e.forEach((function(e){attachment=wp.media.attachment(e),attachment.fetch(),t.add(attachment?[attachment]:[])}))}jQuery(".media-modal").addClass("picu-upload-modal")})),picu_uploader.on("update",(function(e){var t=[];jQuery(".picu-gallery-thumbnails").empty(),e.each((function(e){t.push(e.toJSON().id);var i="";i=e.toJSON().sizes["picu-small"]?e.toJSON().sizes["picu-small"].url:e.toJSON().sizes.full.url,jQuery(".picu-gallery-thumbnails").append('<figure><div class="picu-gallery-thumbnail-box"><div class="picu-gallery-thumbnail-box-inner"><img src="'+i+'" class="attachment-picu-thumbnail" alt="" title=""></div></div></figure>')})),jQuery(".picu-postbox").addClass("picu-gallery-has-images"),t.length>10&&jQuery(".picu-postbox").addClass("js-collapsed is-collapsible");var i=t.join(",");jQuery("#picu-gallery-ids").val(i),jQuery("#post").addClass("dirty")}))),jQuery(document).ready((function(){jQuery(".picu-upload-image-button").on("click",(function(e){e.preventDefault(),picu_uploader.open()})),jQuery(".picu-postbox-inner").on("drop",(function(){picu_uploader.open()}))})),jQuery("body").hasClass("post-status-sent")||jQuery("body").hasClass("post-status-approved")||!jQuery("body").hasClass("post-status-auto-draft")||jQuery(document).ready((function(){var e=new wp.media.view.UploaderWindow({controller:{trigger:function(){},on:function(){}},uploader:{dropzone:jQuery(".picu-postbox-inner")}}).render();e.ready(),jQuery(".picu-postbox-inner").append(e.el)})),function(e){"use strict";(e(".picu-filter select").change((function(t){e(".picu-selection-overview-table tbody tr").show(),e(".picu-selection-overview-table tbody tr.no-match").remove();var i=e(".picu-filter select").val();if("all"==i?e(".picu-selection-overview-table tbody tr").show():"not-selected"==i?e(".picu-selection-overview-table tbody tr.selected").hide():e(".picu-selection-overview-table tbody tr").not("."+i).hide(),e(".picu-selection-overview-table tbody tr").filter(":visible").length<=0){var a=e(".picu-selection-overview-table thead tr th").length;e(".picu-selection-overview-table tbody").append('<tr class="no-match"><td colspan="'+a+'">'+picu_admin.selection_table_no_match+"</td></tr>")}!function(){var e=document.getElementById("picu-table-filter-show").value,t=document.getElementById("picu-table-filter-show").dataset.filenameSeparator,i=document.getElementsByClassName("picu-copy-to-clipboard")[0],a="";if("all"==e)var s=document.getElementsByClassName("picu-selection-table-image");else s=document.getElementsByClassName(e);[...s].forEach((function(e){a=0==a.length?e.dataset.filename:a+t+e.dataset.filename})),document.getElementsByClassName("picu-copy-to-clipboard")[0].dataset.clipboardText=a,document.getElementById("picu-copy-filenames").value=a,i.classList.remove("picu-copied-success"),s.length>0?(document.getElementsByClassName("filename-count")[0].innerHTML="("+s.length+")",i.classList.remove("disabled")):(document.getElementsByClassName("filename-count")[0].innerHTML="",i.classList.add("disabled"))}()})),e(".js-copy-file-names").click((function(t){var i=e(this).data("clip");t.preventDefault(),window.prompt("Copy to clipboard: Ctrl+C, Enter",i)})),e("#publish").click((function(){e("#major-publishing-actions .spinner").show()})),e("#save-post").click((function(){e("#major-publishing-actions .spinner").show()})),e(".picu-show-collection-description a").click((function(t){t.preventDefault(),e(".picu-approval-message").addClass("hidden"),e(".picu-collection-description").toggleClass("hidden")})),e(".picu-show-approval-message a").click((function(t){t.preventDefault(),e(".picu-collection-description").addClass("hidden"),e(".picu-approval-message").toggleClass("hidden")})),e("form#post").areYouSure({message:"Your changes will be lost, do you want to continue?"}),e(".js-collapse-control").change((function(){e(this)[0].checked?e(this).parents(".picu-option-set").find(".js-collapsible").removeClass("is-collapsed"):e(this).parents(".picu-option-set").find(".js-collapsible").addClass("is-collapsed")})),e("#picu-selection-option").change((function(){"in the range of"==e(this).val()?e(".picu-range").show():e(".picu-range").hide()})),Clipboard.isSupported())?new Clipboard(".picu-copy-to-clipboard").on("success",(function(t){t.clearSelection(),e(".picu-copy-to-clipboard").addClass("picu-copied-success")})):(e('label[for="picu-copy-filenames"], #picu-copy-filenames').show(),e(".picu-copy-to-clipboard").hide());e('select[name="_status"] > [value="publish"]').remove(),e('select[name="_status"] > [value="pending"]').remove(),e('select[name="_status"]').append('<option value="sent">'+picu_admin.sent_option_label+'</option><option value="approved">'+picu_admin.approved_option_label+'</option><option value="expired">'+picu_admin.expired_option_label+"</option>");var t=e("#wpfooter .picu-skip-to-delivery");if(e(".wrap .wp-heading-inline").after(t),(t=document.getElementsByClassName("picu-skip-to-delivery")).length>0){var i=document.getElementById("post");new MutationObserver((function(e){e.forEach((function(e){"class"==e.attributeName&&e.target.classList.contains("dirty")&&(t[0].style.display="none")}))})).observe(i,{attributes:!0})}var a=document.querySelector("#picu-new-recipient-email"),s=document.querySelector("#picu-new-recipient-send-email");null!=a&&a.addEventListener("input",(function(e){""!=this.value?s.disabled=!1:s.disabled=!0}));const n=document.getElementsByClassName("picu-share-option-email-field")[0],o=document.getElementById("picumultiemailfield");let r;const c=document.getElementsByClassName("picu-multi-client-pro-hint")[0];if(null!=document.getElementById("picu-collection-email-address")?r=document.getElementById("picu-collection-email-address"):null!=document.getElementById("picu-delivery-email-address")&&(r=document.getElementById("picu-delivery-email-address")),null!=n){function e(e){return e.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/gi)}function t(t){if(null!=t&&t.length>0){var i=e(r.value);t.filter(((e,t,i)=>i.indexOf(e)===t)).forEach((function(t){if(null!=c&&null!==(i=e(r.value))&&i.length>0)return c.classList.remove("hidden"),!1;if(null!==i&&i.length>0&&i.includes(t))return!0;""==r.value?r.value=t:r.value=r.value+", "+t;var a=document.createElement("span"),s=document.createTextNode(t);a.appendChild(s),a.className+="email-address";var o=document.createElement("span");o.className+="delete-email-address",a.appendChild(o),n.insertBefore(a,n.childNodes[n.childNodes.length-1])}))}}function i(i){if(i.preventDefault(),","==this.value.slice(-1)||/\s/g.test(this.value.slice(-1))){var a=e(this.value);null!=a&&a.length>0&&(t(a),o.value="",o.focus())}}function a(i){if(8!=i.which&&null!=c){var a=e(r.value);if(null!==a&&a.length>0)return c.classList.remove("hidden"),o.value="",document.getElementsByClassName("picu-multi-client-pro-hint__content")[0].children[0].focus(),!1}if(13==i.which||9==i.which){i.preventDefault();var s=e(o.value);null!=s&&s.length>0&&t(s),o.value=""}if(8==i.which&&0==o.value.length&&n.childNodes.length>1){console.log("now!!");var l=n.childNodes[n.childNodes.length-2].textContent,u=r.value.replace(l,"");(u=u.replace(", , ",", ")).endsWith(", ")&&(u=u.slice(0,-2)),u.startsWith(", ")&&(u=u.slice(2)),r.value=u,n.childNodes[n.childNodes.length-2].remove()}}function s(){var i=e(o.value);null!=i&&i.length>0&&t(i),o.value=""}o.addEventListener("input",i),o.addEventListener("keydown",a),o.addEventListener("blur",s),document.addEventListener("click",(function(e){if(e.target.matches(".delete-email-address")){e.preventDefault();var t=e.target.parentNode.textContent,i=r.value.replace(t,"");(i=i.replace(", , ",", ")).endsWith(", ")&&(i=i.slice(0,-2)),i.startsWith(", ")&&(i=i.slice(2)),r.value=i,e.target.parentNode.remove()}}))}}(jQuery);